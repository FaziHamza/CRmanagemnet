<nz-spin [nzSpinning]="saveLoader" [nzSize]="'large'">
  <div class="content-body-inner" *ngIf="orderDetail && !isPrintShow">
    <div class="row heading-box">
      <div class="col-lg-6">
        <span class="head-title">{{"Promissory_Notes.Date" | translate}}: </span>
        <span class="head-detail" *ngIf="orderDetail && orderDetail.orderDate">{{orderDetail?.orderDate |
          date:'dd MMM yyyy'}}</span>
        <span class="head-detail" *ngIf="!orderDetail.pnOrderID">---</span>
      </div>
      <div class="col-lg-6 ">
        <div class="text-end">
          <h1 class="head-title ">{{"Promissory_Notes.Order_No" | translate}}:
            <span class="head-detail" *ngIf="orderDetail?.pnOrderID">{{orderDetail?.pnOrderID}}</span>
            <span class="head-detail" *ngIf="!orderDetail.pnOrderID">---</span>
          </h1>
        </div>
      </div>
    </div>
    <div class="card">
      <div class="card-heading">
        <div class="head-left">
          <h5 class="card-subheading">{{"Promissory_Notes.Order_Detail" | translate}}</h5>
        </div>
        <div class="head-right header-btn-setup">
          <button class="btn btn-round mb-2"
            [style.background-color]="orderDetail && orderDetail.statusObj?.lookupBGColor"
            [style.color]="orderDetail && orderDetail.statusObj?.lookupTextColor" type="button">
            <span
              *ngIf="orderDetail && orderDetail.statusObj">{{orderDetail.statusObj?.translations[0].lookupName}}</span>
            <span *ngIf="!orderDetail.statusObj">---</span>
          </button>
        </div>
      </div>
      <div class="card-content">
        <div class="row">
          <div class="col-lg-2">
            <div class="card-box">
              <h4 class="title">{{"Promissory_Notes.Order_Link" | translate}}</h4>
            </div>
          </div>
          <div class="col-lg-4">
            <div class="card-box">
              <a class="anchor-content" *ngIf="orderDetail && orderDetail.orderQNTRLLink"
                href="{{ orderDetail.orderQNTRLLink }}" target="_blank">{{ orderDetail.orderQNTRLLink
                }}</a>
              <a class="anchor-content" *ngIf="!orderDetail.orderQNTRLLink">---</a>
            </div>
          </div>
          <div class="col-lg-6 text-end">
            <div class="card-box">
              <h4 class="title">{{"Promissory_Notes.Opportunity_Card_No" | translate}}. :
                <span class="detail"
                  *ngIf="orderDetail && orderDetail.opportunityNo">{{orderDetail.opportunityNo}}</span>
                <span class="detail" *ngIf="!orderDetail.opportunityNo">---</span>
              </h4>
            </div>
          </div>
          <div class="col-lg-3 col-md-4">
            <div class="card-box">
              <h4 class="title">{{"Promissory_Notes.Brand_Name" | translate}}</h4>
              <h4 class="detail" *ngIf="orderDetail && orderDetail.orderDetail?.brand">
                {{orderDetail.orderDetail?.brand.brand}}</h4>
              <h4 class="detail" *ngIf="!orderDetail.orderDetail?.brand">---</h4>
            </div>
          </div>
          <div class="col-lg-2 col-md-4">
            <div class="card-box">
              <h4 class="title">{{"Promissory_Notes.Vehicle_Model" | translate}}</h4>
              <h4 class="detail" *ngIf="orderDetail && orderDetail.orderDetail?.model">
                {{orderDetail.orderDetail?.model.modelName}}</h4>
              <h4 class="detail" *ngIf="!orderDetail.orderDetail?.model">---</h4>
            </div>
          </div>
          <div class="col-lg-2 col-md-4">
            <div class="card-box">
              <h4 class="title">{{"Promissory_Notes.VIN_No" | translate}}.</h4>
              <h4 class="detail" *ngIf="orderDetail && orderDetail.orderDetail?.vinNo">
                {{orderDetail.orderDetail?.vinNo}}</h4>
              <h4 class="detail" *ngIf="!orderDetail.orderDetail?.vinNo">---</h4>
            </div>
          </div>
          <div class="col-lg-2 col-md-4">
            <div class="card-box">
              <h4 class="title">{{"Promissory_Notes.Vehicle_Price" | translate}}</h4>
              <h4 class="detail" *ngIf="orderDetail && orderDetail.totalAmount">
                {{orderDetail.totalAmount |  number : ".3"}} JOD</h4>
              <h4 class="detail" *ngIf="!orderDetail.totalAmount">---</h4>
            </div>
          </div>
          <div class="col-lg-3 col-md-4">
            <div class="card-box">
              <h4 class="title">{{"Promissory_Notes.Sales_Person" | translate}}</h4>
              <h4 class="detail" *ngIf="orderDetail && orderDetail.salesConsultant">
                {{orderDetail.salesConsultant.salesConsultantName}}</h4>
              <h4 class="detail" *ngIf="!orderDetail.salesConsultant">---</h4>
            </div>
          </div>
        </div>
      </div>
    </div>
    <nz-tabset>
      <nz-tab [nzTitle]="titleTemplate" *ngFor="let item of versionTab.reverse();let index = index"
        (nzClick)="getGeneratedList(item)">
        <ng-template #titleTemplate>
          <span>{{item?.tabName}}</span>
        </ng-template>
        <div *ngIf="!isGenerate">
          <div class="card">
            <div class="card-heading bb-none">
              <h5>Original Customer Information</h5>
            </div>
            <div class="card-content">
              <div class="row heading-box customer-info-card">
                <div class="col-lg-6">
                  <div class="profileee">
                    <div class="img-box" *ngIf="orderDetail.originalCustomer?.customerName">
                      <nz-avatar
                        [nzText]="commonService.getInitialOfName(orderDetail.originalCustomer?.customerName)"></nz-avatar>
                    </div>
                    <div class="heading-box">
                      <p class="head-title ">Name :
                        <span class="head-detail" *ngIf="orderDetail.originalCustomer?.customerName">
                          {{orderDetail.originalCustomer?.customerName}}</span>
                        <span class="head-detail" *ngIf="!orderDetail.originalCustomer?.customerName">---</span>
                      </p>

                    </div>
                  </div>
                </div>
                <div class="col-lg-6">
                  <p class="head-title ">{{"Promissory_Notes.Customer_Account" | translate}} :
                    <span class="head-detail"
                      *ngIf="orderDetail.originalCustomer?.customerId">{{orderDetail.originalCustomer?.customerId}}</span>
                    <span class="head-detail" *ngIf="!orderDetail.originalCustomer?.customerId">---</span>

                  </p>
                </div>
                <div class="col-lg-6">
                  <p class="head-title ">{{"Promissory_Notes.ID" | translate}} :

                    <span class="head-detail" *ngIf="orderDetail && orderDetail.originalCustomer?.nationalId">
                      {{orderDetail.originalCustomer?.nationalId}}</span>
                    <span class="head-detail" *ngIf="!orderDetail.originalCustomer?.nationalId">---</span>
                  </p>
                </div>
                <div class="col-lg-6">
                  <p class="head-title ">{{"Promissory_Notes.Phone_No" | translate}} :
                    <span class="head-detail" *ngIf="orderDetail && orderDetail.originalCustomer?.mobile">
                      {{orderDetail.originalCustomer?.mobile}}</span>
                    <span class="head-detail" *ngIf="!orderDetail.originalCustomer?.mobile">---</span>
                  </p>
                </div>
                <div class="col-lg-6">
                  <p class="head-title ">{{"Promissory_Notes.Address" | translate}} :

                    <span class="head-detail" *ngIf="orderDetail && orderDetail.originalCustomer?.custAddress">
                      {{orderDetail.originalCustomer?.custAddress}}</span>
                    <span class="head-detail" *ngIf="!orderDetail.originalCustomer?.custAddress">---</span>
                  </p>

                </div>
                <div class="col-lg-6">
                  <div class="row">
                    <div class="col-lg-3">
                      <p class="head-title ">{{"Promissory_Notes.ID_Attachment" | translate}} :
                      </p>
                    </div>
                    <div class="col-lg-8 d-grid ">
                      <button type="button" class="pdf-view-btn" *ngIf="orderDetail.originalCustomer?.identityFile1"
                        (click)="pdfView(orderDetail.originalCustomer?.identityFile1)">
                        <div>
                          {{"Promissory_Notes.document_name_PDF"
                          |
                          translate}}
                        </div>
                        <div>
                          <a (click)="pdfView(orderDetail.originalCustomer?.identityFile1)" class="eye">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                              <path fill="currentColor"
                                d="M12 9a3 3 0 0 1 3 3a3 3 0 0 1-3 3a3 3 0 0 1-3-3a3 3 0 0 1 3-3m0-4.5c5 0 9.27 3.11 11 7.5c-1.73 4.39-6 7.5-11 7.5S2.73 16.39 1 12c1.73-4.39 6-7.5 11-7.5M3.18 12a9.821 9.821 0 0 0 17.64 0a9.821 9.821 0 0 0-17.64 0Z" />
                            </svg>
                          </a>
                          <a href="{{ orderDetail.originalCustomer.identityFile1}}" target="_blank" class="download">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                              <path fill="currentColor"
                                d="M12 15.575q-.2 0-.375-.062T11.3 15.3l-3.6-3.6q-.275-.275-.275-.7t.275-.7q.275-.275.713-.287t.712.262L11 12.15V5q0-.425.288-.713T12 4q.425 0 .713.288T13 5v7.15l1.875-1.875q.275-.275.713-.263t.712.288q.275.275.275.7t-.275.7l-3.6 3.6q-.15.15-.325.213t-.375.062ZM6 20q-.825 0-1.413-.588T4 18v-2q0-.425.288-.713T5 15q.425 0 .713.288T6 16v2h12v-2q0-.425.288-.713T19 15q.425 0 .713.288T20 16v2q0 .825-.588 1.413T18 20H6Z" />
                            </svg>
                          </a>
                        </div>
                      </button>
                      <span class="head-detail" *ngIf="!orderDetail.originalCustomer?.identityFile1">---</span>
                    </div>
                  </div>

                </div>
              </div>

              <div class="row heading-box">
                <div class="col-lg-4 ">

                </div>
                <div class="col-lg-8">

                </div>
              </div>
            </div>

          </div>
          <div class="row">
            <div class="col-lg-4 col-md-6">
              <div class="card">
                <div class="card-heading bb-none">
                  <h5>New Customer Information</h5>
                </div>
                <div class="card-content">
                  <div class="profileee">

                    <div class="img-box" *ngIf="orderDetail.customer.customerName">
                      <nz-avatar
                        [nzText]="commonService.getInitialOfName(orderDetail.customer.customerName)"></nz-avatar>
                    </div>
                    <div class="heading-box">
                      <p class="head-title ">{{"Promissory_Notes.Name" | translate}}
                        <span class="head-detail"
                          *ngIf="orderDetail && orderDetail.customer.customerName">{{orderDetail.customer.customerName}}</span>
                        <span class="head-detail" *ngIf="!orderDetail.customer.customerName">---</span>
                      </p>
                      <p class="head-title ">{{"Promissory_Notes.Customer_Account" | translate}}
                        <span class="head-detail"
                          *ngIf="orderDetail && orderDetail.customer.customerId">{{orderDetail.customer.customerId}}</span>
                        <span class="head-detail" *ngIf="!orderDetail.customer.customerId">---</span>
                      </p>
                    </div>
                  </div>
                  <div class="row heading-box customer-info-card">
                    <div class="col-lg-4 ">
                      <p class="head-title ">{{"Promissory_Notes.ID" | translate}}</p>
                      <p class="head-title ">{{"Promissory_Notes.Phone_No" | translate}}.</p>
                      <p class="head-title ">{{"Promissory_Notes.Address" | translate}}</p>
                    </div>
                    <div class="col-lg-8">
                      <p class="head-detail" *ngIf="orderDetail && orderDetail.customer.nationalId">
                        {{orderDetail.customer.nationalId}}</p>
                      <p class="head-detail" *ngIf="!orderDetail.customer.nationalId">---</p>
                      <p class="head-detail" *ngIf="orderDetail && orderDetail.customer.mobile">
                        {{orderDetail.customer.mobile}}</p>
                      <p class="head-detail" *ngIf="!orderDetail.customer.mobile">---</p>
                      <p class="head-detail" *ngIf="orderDetail && orderDetail.customer.custAddress">
                        {{orderDetail.customer.custAddress}}</p>
                      <p class="head-detail" *ngIf="!orderDetail.customer.custAddress">---</p>
                    </div>
                  </div>
                  <div class="row heading-box">
                    <div class="col-lg-4 ">
                      <p class="head-title ">{{"Promissory_Notes.ID_Attachment" | translate}}</p>
                    </div>
                    <div class="col-lg-8">
                      <button type="button" class="pdf-view-btn" *ngIf="orderDetail.customer.identityFile1"
                        (click)="pdfView(orderDetail.customer.identityFile1)">{{"Promissory_Notes.document_name_PDF"
                        |
                        translate}}
                        <a (click)="pdfView(orderDetail.customer.identityFile1)" class="eye">
                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                            <path fill="currentColor"
                              d="M12 9a3 3 0 0 1 3 3a3 3 0 0 1-3 3a3 3 0 0 1-3-3a3 3 0 0 1 3-3m0-4.5c5 0 9.27 3.11 11 7.5c-1.73 4.39-6 7.5-11 7.5S2.73 16.39 1 12c1.73-4.39 6-7.5 11-7.5M3.18 12a9.821 9.821 0 0 0 17.64 0a9.821 9.821 0 0 0-17.64 0Z" />
                          </svg>
                        </a>
                        <a href="{{ orderDetail.customer.identityFile1}}" target="_blank" class="download">
                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                            <path fill="currentColor"
                              d="M12 15.575q-.2 0-.375-.062T11.3 15.3l-3.6-3.6q-.275-.275-.275-.7t.275-.7q.275-.275.713-.287t.712.262L11 12.15V5q0-.425.288-.713T12 4q.425 0 .713.288T13 5v7.15l1.875-1.875q.275-.275.713-.263t.712.288q.275.275.275.7t-.275.7l-3.6 3.6q-.15.15-.325.213t-.375.062ZM6 20q-.825 0-1.413-.588T4 18v-2q0-.425.288-.713T5 15q.425 0 .713.288T6 16v2h12v-2q0-.425.288-.713T19 15q.425 0 .713.288T20 16v2q0 .825-.588 1.413T18 20H6Z" />
                          </svg>
                        </a>
                      </button>
                      <p class="head-detail" *ngIf="!orderDetail.customer.identityFile1">---</p>
                    </div>
                  </div>
                </div>
                <hr />
                <div class="card-heading bb-none">
                  <div class="head-left">
                    <h5>New Guarantor Information</h5>
                  </div>
                  <!-- <div class="head-right"></div> -->
                </div>
                <div class="card-content">
                  <div class="profileee">
                    <div class="img-box">
                      <nz-avatar
                        [nzText]="commonService.getInitialOfName(orderDetail.newGuarantor.customerName)"></nz-avatar>
                    </div>
                    <div class="heading-box">
                      <p class="head-title ">{{"Promissory_Notes.Name" | translate}}
                        <span class="head-detail"
                          *ngIf="orderDetail && orderDetail.newGuarantor.customerName">{{orderDetail.newGuarantor.customerName}}</span>
                        <span class="head-detail" *ngIf="!orderDetail.newGuarantor.customerName">---</span>
                      </p>
                      <p class="head-title ">{{"Promissory_Notes.Customer_Account" | translate}}
                        <span *ngIf="orderDetail && orderDetail.newGuarantor.customerId"
                          class="head-detail">{{orderDetail.newGuarantor.customerId}}</span>
                        <span class="head-detail" *ngIf="!orderDetail.newGuarantor.customerId">---</span>
                      </p>
                    </div>
                  </div>
                  <div class="row heading-box">
                    <div class="col-lg-4 ">
                      <p class="head-title ">{{"Promissory_Notes.ID" | translate}}</p>
                      <p class="head-title ">{{"Promissory_Notes.Phone_No" | translate}}.</p>
                      <p class="head-title ">{{"Promissory_Notes.Address" | translate}}</p>
                    </div>
                    <div class="col-lg-8">
                      <p class="head-detail" *ngIf="orderDetail && orderDetail.newGuarantor.nationalId">
                        {{orderDetail.newGuarantor.nationalId}}</p>
                      <p class="head-detail" *ngIf="!orderDetail.newGuarantor.nationalId">---</p>
                      <p class="head-detail" *ngIf="orderDetail && orderDetail.newGuarantor.mobile">
                        {{orderDetail.newGuarantor.mobile}}</p>
                      <p class="head-detail" *ngIf="!orderDetail.newGuarantor.mobile">---</p>
                      <p class="head-detail" *ngIf="orderDetail && orderDetail.newGuarantor.custAddress">
                        {{orderDetail.newGuarantor.custAddress}}</p>
                      <p class="head-detail" *ngIf="!orderDetail.newGuarantor.custAddress">---</p>
                    </div>
                  </div>
                  <div class="row heading-box">
                    <div class="col-lg-4 ">
                      <p class="head-title ">{{"Promissory_Notes.ID_Attachment" | translate}}</p>
                    </div>
                    <div class="col-lg-8">
                      <button type="button" *ngIf="orderDetail && orderDetail.newGuarantor.identityFile1"
                        class="pdf-view-btn">{{"Promissory_Notes.document_name_PDF" |
                        translate}}
                        <a (click)="pdfView(orderDetail.newGuarantor.identityFile1)" class="eye">
                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                            <path fill="currentColor"
                              d="M12 9a3 3 0 0 1 3 3a3 3 0 0 1-3 3a3 3 0 0 1-3-3a3 3 0 0 1 3-3m0-4.5c5 0 9.27 3.11 11 7.5c-1.73 4.39-6 7.5-11 7.5S2.73 16.39 1 12c1.73-4.39 6-7.5 11-7.5M3.18 12a9.821 9.821 0 0 0 17.64 0a9.821 9.821 0 0 0-17.64 0Z" />
                          </svg>
                        </a>
                        <a href="{{ orderDetail.newGuarantor.identityFile1}}" target="_blank" class="download">
                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                            <path fill="currentColor"
                              d="M12 15.575q-.2 0-.375-.062T11.3 15.3l-3.6-3.6q-.275-.275-.275-.7t.275-.7q.275-.275.713-.287t.712.262L11 12.15V5q0-.425.288-.713T12 4q.425 0 .713.288T13 5v7.15l1.875-1.875q.275-.275.713-.263t.712.288q.275.275.275.7t-.275.7l-3.6 3.6q-.15.15-.325.213t-.375.062ZM6 20q-.825 0-1.413-.588T4 18v-2q0-.425.288-.713T5 15q.425 0 .713.288T6 16v2h12v-2q0-.425.288-.713T19 15q.425 0 .713.288T20 16v2q0 .825-.588 1.413T18 20H6Z" />
                          </svg>
                        </a>
                      </button>
                      <p class="head-detail" *ngIf="!orderDetail.newGuarantor.identityFile1">---
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-lg-8 col-md-8">
              <div class="promissory-notes-details-card">
                <div class="card-heading pb-4">
                  <h5>
                    New Promissory Notes
                  </h5>
                  <div class="row" *ngIf="orderDetail">
                    <div class="col-lg-12" *ngIf="orderDetail.statusObj?.lookupId == 21011">
                      <textarea class="form-control" rows="5" [value]="orderDetail.rejectionReason"></textarea>
                    </div>
                  </div>
                </div>
                <div class="bottom-buttons first-btn mt-4 pt-4" *ngIf="orderDetail">
                  <div
                    *ngIf="orderDetail.statusObj?.lookupId == 21012 || orderDetail.statusObj?.lookupId == 21011; else elseBlock">
                    <button type="button" class="btn btn-white hvr-bounce-to-right2"
                      [routerLink]="['/home/workorders']">{{"Promissory_Notes.Close" |
                      translate}}</button>
                  </div>
                  <ng-template #elseBlock>
                    <div
                      *ngIf="orderDetail.statusObj?.lookupId == 21007 || orderDetail.statusObj?.lookupId == 21008; else thirdBlock">
                      <button type="button" class="btn btn-white hvr-bounce-to-right2"
                        [routerLink]="['/home/workorders']">{{"Promissory_Notes.Close" |
                        translate}}</button>
                      <button type="button" class="btn btn-white hvr-bounce-to-right2" [ngClass]="{'disabled-link': !canPerformAction(7, 40, 82)}"
                        (click)="rejected()">{{"Promissory_Notes.Reject" |
                        translate}}</button>
                      <button class="btn o-btn hvr-bounce-to-right" (click)="approveRequest()" [ngClass]="{'disabled-link': !canPerformAction(7, 40, 82)}"
                        type="button">{{"Promissory_Notes.Approve" |
                        translate}}</button>
                    </div>

                  </ng-template>
                  <ng-template #thirdBlock>

                    <div *ngIf="orderDetail.statusObj?.lookupId == 21010 || orderDetail.statusObj?.lookupId == 21009;">
                      <button type="button" class="btn btn-white hvr-bounce-to-right2"
                      [routerLink]="['/home/workorders']">{{"Promissory_Notes.Close" |
                      translate}}</button>

                    </div>
                  </ng-template>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="row" *ngIf="isGenerate">
          <div class="col-lg-4 col-md-6">
            <div class="card">
              <div class="card-heading bb-none">
                <h5>{{"Promissory_Notes.Customer_Information" | translate}}</h5>
              </div>
              <div class="card-content">
                <div class="profileee">

                  <div class="img-box" *ngIf="orderDetail.customer.customerName">
                    <nz-avatar [nzText]="commonService.getInitialOfName(orderDetail.customer.customerName)"></nz-avatar>
                  </div>
                  <div class="heading-box">
                    <p class="head-title ">{{"Promissory_Notes.Name" | translate}}
                      <span class="head-detail"
                        *ngIf="orderDetail && orderDetail.customer.customerName">{{orderDetail.customer.customerName}}</span>
                      <span class="head-detail" *ngIf="!orderDetail.customer.customerName">---</span>
                    </p>
                    <p class="head-title ">{{"Promissory_Notes.Customer_Account" | translate}}
                      <span class="head-detail"
                        *ngIf="orderDetail && orderDetail.customer.customerId">{{orderDetail.customer.customerId}}</span>
                      <span class="head-detail" *ngIf="!orderDetail.customer.customerId">---</span>
                    </p>
                  </div>
                </div>
                <div class="row heading-box customer-info-card">
                  <div class="col-lg-4 ">
                    <p class="head-title ">{{"Promissory_Notes.ID" | translate}}</p>
                    <p class="head-title ">{{"Promissory_Notes.Phone_No" | translate}}.</p>
                    <p class="head-title ">{{"Promissory_Notes.Address" | translate}}</p>
                  </div>
                  <div class="col-lg-8">
                    <p class="head-detail" *ngIf="orderDetail && orderDetail.customer.nationalId">
                      {{orderDetail.customer.nationalId}}</p>
                    <p class="head-detail" *ngIf="!orderDetail.customer.nationalId">---</p>
                    <p class="head-detail" *ngIf="orderDetail && orderDetail.customer.mobile">
                      {{orderDetail.customer.mobile}}</p>
                    <p class="head-detail" *ngIf="!orderDetail.customer.mobile">---</p>
                    <p class="head-detail" *ngIf="orderDetail && orderDetail.customer.custAddress">
                      {{orderDetail.customer.custAddress}}</p>
                    <p class="head-detail" *ngIf="!orderDetail.customer.custAddress">---</p>
                  </div>
                </div>
                <div class="row heading-box">
                  <div class="col-lg-4 ">
                    <p class="head-title ">{{"Promissory_Notes.ID_Attachment" | translate}}</p>
                  </div>
                  <div class="col-lg-8">
                    <button type="button" class="pdf-view-btn" *ngIf="orderDetail.customer.identityFile1"
                      (click)="pdfView(orderDetail.customer.identityFile1)">{{"Promissory_Notes.document_name_PDF"
                      |
                      translate}}
                      <a (click)="pdfView(orderDetail.customer.identityFile1)" class="eye">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                          <path fill="currentColor"
                            d="M12 9a3 3 0 0 1 3 3a3 3 0 0 1-3 3a3 3 0 0 1-3-3a3 3 0 0 1 3-3m0-4.5c5 0 9.27 3.11 11 7.5c-1.73 4.39-6 7.5-11 7.5S2.73 16.39 1 12c1.73-4.39 6-7.5 11-7.5M3.18 12a9.821 9.821 0 0 0 17.64 0a9.821 9.821 0 0 0-17.64 0Z" />
                        </svg>
                      </a>
                      <a href="{{ orderDetail.customer.identityFile1}}" target="_blank" class="download">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                          <path fill="currentColor"
                            d="M12 15.575q-.2 0-.375-.062T11.3 15.3l-3.6-3.6q-.275-.275-.275-.7t.275-.7q.275-.275.713-.287t.712.262L11 12.15V5q0-.425.288-.713T12 4q.425 0 .713.288T13 5v7.15l1.875-1.875q.275-.275.713-.263t.712.288q.275.275.275.7t-.275.7l-3.6 3.6q-.15.15-.325.213t-.375.062ZM6 20q-.825 0-1.413-.588T4 18v-2q0-.425.288-.713T5 15q.425 0 .713.288T6 16v2h12v-2q0-.425.288-.713T19 15q.425 0 .713.288T20 16v2q0 .825-.588 1.413T18 20H6Z" />
                        </svg>
                      </a>
                    </button>
                    <p class="head-detail" *ngIf="!orderDetail.customer.identityFile1">---</p>
                  </div>
                </div>
              </div>
              <hr />
              <div class="card-heading bb-none">
                <div class="head-left">
                  <h5>{{"Promissory_Notes.Guarantor_Information" | translate}}</h5>
                </div>
                <!-- <div class="head-right"></div> -->
              </div>
              <div class="card-content">
                <div class="profileee">
                  <div class="img-box">
                    <nz-avatar
                      [nzText]="commonService.getInitialOfName(orderDetail.guarantor.customerName)"></nz-avatar>
                  </div>
                  <div class="heading-box">
                    <p class="head-title ">{{"Promissory_Notes.Name" | translate}}
                      <span class="head-detail"
                        *ngIf="orderDetail && orderDetail.guarantor.customerName">{{orderDetail.guarantor.customerName}}</span>
                      <span class="head-detail" *ngIf="!orderDetail.guarantor.customerName">---</span>
                    </p>
                    <p class="head-title ">{{"Promissory_Notes.Customer_Account" | translate}}
                      <span *ngIf="orderDetail && orderDetail.guarantor.customerId"
                        class="head-detail">{{orderDetail.guarantor.customerId}}</span>
                      <span class="head-detail" *ngIf="!orderDetail.guarantor.customerId">---</span>
                    </p>
                  </div>
                </div>
                <div class="row heading-box">
                  <div class="col-lg-4 ">
                    <p class="head-title ">{{"Promissory_Notes.ID" | translate}}</p>
                    <p class="head-title ">{{"Promissory_Notes.Phone_No" | translate}}.</p>
                    <p class="head-title ">{{"Promissory_Notes.Address" | translate}}</p>
                  </div>
                  <div class="col-lg-8">
                    <p class="head-detail" *ngIf="orderDetail && orderDetail.guarantor.nationalId">
                      {{orderDetail.guarantor.nationalId}}</p>
                    <p class="head-detail" *ngIf="!orderDetail.guarantor.nationalId">---</p>
                    <p class="head-detail" *ngIf="orderDetail && orderDetail.guarantor.mobile">
                      {{orderDetail.guarantor.mobile}}</p>
                    <p class="head-detail" *ngIf="!orderDetail.guarantor.mobile">---</p>
                    <p class="head-detail" *ngIf="orderDetail && orderDetail.guarantor.custAddress">
                      {{orderDetail.guarantor.custAddress}}</p>
                    <p class="head-detail" *ngIf="!orderDetail.guarantor.custAddress">---</p>
                  </div>
                </div>
                <div class="row heading-box">
                  <div class="col-lg-4 ">
                    <p class="head-title ">{{"Promissory_Notes.ID_Attachment" | translate}}</p>
                  </div>
                  <div class="col-lg-8">
                    <button type="button" *ngIf="orderDetail && orderDetail.guarantor.identityFile1"
                      class="pdf-view-btn">{{"Promissory_Notes.document_name_PDF" |
                      translate}}
                      <a (click)="pdfView(orderDetail.guarantor.identityFile1)" class="eye">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                          <path fill="currentColor"
                            d="M12 9a3 3 0 0 1 3 3a3 3 0 0 1-3 3a3 3 0 0 1-3-3a3 3 0 0 1 3-3m0-4.5c5 0 9.27 3.11 11 7.5c-1.73 4.39-6 7.5-11 7.5S2.73 16.39 1 12c1.73-4.39 6-7.5 11-7.5M3.18 12a9.821 9.821 0 0 0 17.64 0a9.821 9.821 0 0 0-17.64 0Z" />
                        </svg>
                      </a>
                      <a href="{{ orderDetail.guarantor.identityFile1}}" target="_blank" class="download">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                          <path fill="currentColor"
                            d="M12 15.575q-.2 0-.375-.062T11.3 15.3l-3.6-3.6q-.275-.275-.275-.7t.275-.7q.275-.275.713-.287t.712.262L11 12.15V5q0-.425.288-.713T12 4q.425 0 .713.288T13 5v7.15l1.875-1.875q.275-.275.713-.263t.712.288q.275.275.275.7t-.275.7l-3.6 3.6q-.15.15-.325.213t-.375.062ZM6 20q-.825 0-1.413-.588T4 18v-2q0-.425.288-.713T5 15q.425 0 .713.288T6 16v2h12v-2q0-.425.288-.713T19 15q.425 0 .713.288T20 16v2q0 .825-.588 1.413T18 20H6Z" />
                        </svg>
                      </a>
                    </button>
                    <p class="head-detail" *ngIf="!orderDetail.guarantor.identityFile1">---</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-8 col-md-8">
            <div class="promissory-notes-details-card">
              <div class="card-heading pb-4">
                <h5>
                  Promissory Notes Details
                </h5>
                <!-- <div class="row heading-box">
                                    <div class="col-lg-4 col-md-6">
                                        <div class="card-box">
                                            <h4 class="head-title">{{"Promissory_Notes.Promissory_Notes_Amount" |
                                                translate}}:
                                                <span class="head-detail"
                                                    *ngIf="orderDetail.pnTotalAmount">{{orderDetail.pnTotalAmount |
                                                    customRound: 0}}</span>
                                                <span class="head-detail" *ngIf="!orderDetail.pnTotalAmount">---</span>
                                            </h4>
                                        </div>
                                    </div>
                                    <div class="col-lg-4 col-md-6">
                                        <div class="card-box">
                                            <h4 class="head-title">{{"Promissory_Notes.No_Of_Installments" | translate}}
                                                :
                                                <span class="head-detail"
                                                    *ngIf="orderDetail.numberOfInstallments">{{orderDetail.numberOfInstallments}}</span>
                                                <span class="head-detail"
                                                    *ngIf="!orderDetail.numberOfInstallments">---</span>
                                            </h4>
                                        </div>
                                    </div>
                                    <div class="col-lg-4 col-md-6">
                                        <div class="card-box">
                                            <h4 class="head-title">{{"Promissory_Notes.First_Due_Date" | translate}}:
                                                <span class="head-detail"
                                                    *ngIf="orderDetail.startDate">{{orderDetail.startDate | date:'dd MMM yyyy' }}</span>
                                                <span class="head-detail" *ngIf="!orderDetail.startDate">---</span>
                                            </h4>
                                        </div>
                                    </div>

                                </div> -->
              </div>
              <div class="wizard-form-body">

                <div class="main-content">
                  <div class="wizard-form">
                    <ul id="progressBar" class="progressbar">
                      <li *ngFor="let step of steps; let i = index" [id]="'progressList-' + (i+1)"
                        class="d-inline-block fw-bold position-relative text-center float-start progressbar-list"
                        [ngClass]="{'active': current >= i}">
                        {{step.title | translate}}
                      </li>
                    </ul>

                  </div>
                  <nz-spin [nzSpinning]="stepSaveLoader" [nzSize]="'large'">
                    <div class="wizard-content">
                      <div *ngFor="let step of steps; let i = index" class="row justify-content-center"
                        [hidden]="current !== i">
                        <div class="col-lg-12 col-md-8">
                          <div>
                            <div class="row heading-box mt-4 pt-4">
                              <div class="col-lg-6">
                                <h1 class="head-title ">
                                  {{"Promissory_Notes.List_Of_Promissory_Notes" |
                                  translate}}
                                </h1>
                              </div>
                              <div class="col-lg-6 text-end">
                                <h1 class="head-title ">
                                  {{"Promissory_Notes.PN_BOOK_NO" |
                                  translate}} :
                                  <span *ngIf="generatedlist.length  > 0 "
                                    class="head-detail">{{generatedlist[0].pnBookID}}</span>
                                </h1>
                              </div>
                              <div class="row heading-box">
                                <div class="col-lg-3 col-md-6">
                                  <div class="card-box">
                                    <h4 class="head-title">
                                      All PN Amount

                                    </h4>
                                    <h4 class="head-detail" *ngIf="otherDetail.pnsTotal">{{otherDetail.pnsTotal |  number : ".3"}}
                                      JOD</h4>
                                    <h4 class="head-detail" *ngIf="!otherDetail.pnsTotal">---</h4>
                                  </div>
                                </div>
                                <div class="col-lg-2 col-md-6">
                                  <div class="card-box">
                                    <h4 class="head-title">
                                      PN Account

                                    </h4>
                                    <h4 class="head-detail"
                                    *ngIf="otherDetail.numberOfInstallments">{{otherDetail.numberOfInstallments}}</h4>
                                  <h4 class="head-detail" *ngIf="!otherDetail.numberOfInstallments">---</h4>
                                  </div>
                                </div>
                                <div class="col-lg-3 col-md-6">
                                  <div class="card-box">
                                    <h4 class="head-title">
                                      Remaining PN Account

                                    </h4>
                                    <h4 class="head-detail"
                                    *ngIf="otherDetail.remainingAmount">{{otherDetail.remainingAmount |  number : ".3"}}
                                    JOD</h4>
                                  <h4 class="head-detail" *ngIf="!otherDetail.remainingAmount">---</h4>
                                  </div>
                                </div>
                                <div class="col-lg-4 col-md-6">
                                  <div class="card-box">
                                    <h4 class="head-title">
                                      Remaining Uncollected PNs

                                    </h4>
                                    <h4 class="head-detail"
                                        *ngIf="otherDetail.remainingUncollectedCount">{{otherDetail.remainingUncollectedCount}}</h4>
                                      <h4 class="head-detail"
                                        *ngIf="!otherDetail.remainingUncollectedCount">---</h4>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="table-responsive">

                              <nz-table #editRowTable nzBordered [nzData]="generatedlist" nzTableLayout="fixed"
                                [nzPageSize]="6">
                                <thead>
                                  <tr>
                                    <th nz-th nzSortFn="ascend" nzWidth="8%" (click)="getSortFunction(sortType,'orderno')">
                                      {{"Promissory_Notes.No" | translate}}
                                  </th>
                                  <th>{{"Promissory_Notes.Customer_Name" |
                                      translate}}
                                  </th>
                                  <th  nz-th nzSortFn="ascend" (click)="getSortFunction(sortType,'amount')">
                                      {{"Promissory_Notes.Amount" | translate}}
                                  </th>
                                  <th nz-th nzSortFn="ascend" (click)="getSortFunction(sortType,'date')">
                                      {{"Promissory_Notes.Due_Date" | translate}}
                                  </th>
                                  <th nz-th nzSortFn="ascend" (click)="getSortFunction(sortType,'status')">
                                      {{"Promissory_Notes.PN_Status" | translate}}
                                  </th>
                                  <th nzWidth="12%">{{"Promissory_Notes.Action" | translate}}
                                  </th>
                                  </tr>
                                </thead>
                                <tbody>
                                  <ng-container *ngFor="let data of editRowTable.data;let index = index">
                                    <tr
                                      [ngClass]="{'hightlight-row': data.status.toLowerCase() == 'uncollected' &&  current == 4 && data.dateCheck == true}">
                                      <td>
                                        {{ data.id }}
                                      </td>
                                      <td>{{ data.customerName }}</td>
                                      <td>{{ data.amount |  number : ".3" }} JOD
                                      </td>
                                      <td>
                                        {{data.dueDate | date : 'dd MMM yyyy'}}
                                      </td>
                                      <td>

                                        <button class="btn generating-status" [style.color]="data.lookupTextColor"
                                          [style.background-color]="data.lookupBGColor">{{data.status}}</button>
                                      </td>
                                      <td>
                                        <a class="pen-icon" (click)="pdfView(data.pdfView,data)">
                                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                            viewBox="0 0 24 24" style="color: rgb(168 168 168)">
                                            <path fill="currentColor"
                                              d="M12 9a3 3 0 0 1 3 3a3 3 0 0 1-3 3a3 3 0 0 1-3-3a3 3 0 0 1 3-3m0-4.5c5 0 9.27 3.11 11 7.5c-1.73 4.39-6 7.5-11 7.5S2.73 16.39 1 12c1.73-4.39 6-7.5 11-7.5M3.18 12a9.821 9.821 0 0 0 17.64 0a9.821 9.821 0 0 0-17.64 0Z" />
                                          </svg>
                                        </a>
                                      </td>
                                    </tr>
                                  </ng-container>

                                </tbody>
                              </nz-table>
                            </div>
                          </div>
                          <div class="bottom-buttons">
                            <button class="btn o-btn btn-white hvr-bounce-to-right"  [ngClass]="{'disabled-link': !canPerformAction(7, 40, 82)}"
                              [disabled]="true" type="button">Create
                              Request</button>
                            <button class="btn o-btn hvr-bounce-to-right" [routerLink]="['/home/workorders']"
                              type="button">Close</button>
                          </div>

                        </div>
                      </div>
                    </div>
                  </nz-spin>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nz-tab>
    </nz-tabset>
  </div>
  <div *ngIf="isPrintShow">
    <div class="row heading-box p-4">
      <div class="col-lg-6 ">
        <h1 class="header-content ">
          {{"Promissory_Notes.List_Of_Promissory_Notes" |
          translate}}
        </h1>

      </div>
      <div class="col-lg-6 text-end">
        <h1 class="header-content ">
          {{"Promissory_Notes.Difference_amount" |
          translate}} (JOD) : <span class="head-detail"
            *ngIf="generatedlist.length  > 0 ">{{generatedlist[0].pnBookID}}</span>
        </h1>
      </div>
    </div>
    <embed [src]="safeUrl" *ngIf="safeUrl" type="application/pdf" width="100%" height="600px">
    <div class="row">
      <div class="col-lg-7"></div>
      <div class="col-lg-4">
        <div class="bottom-buttons">
          <button type="button" class="btn btn-white hvr-bounce-to-right2" (click)="printClose()">Close</button>
          <button class="btn o-btn hvr-bounce-to-right" type="button" (click)="printAll(19002)" [ngClass]="{'disabled-link': !canPerformAction(7, 40, 82)}">Print
            All</button>
        </div>
      </div>
      <div class="col-lg-1"></div>

    </div>

  </div>
</nz-spin>
